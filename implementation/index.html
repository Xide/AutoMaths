
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.8.1">
    
    
      
        <title>Implementation - AutoMaths</title>
      
    
    
      <script src="../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-bfecc7305d.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href=".." title="AutoMaths" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Implementation
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    AutoMaths
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../data/" title="Data" class="md-nav__link">
      Data
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Implementation
      </label>
    
    <a href="./" title="Implementation" class="md-nav__link md-nav__link--active">
      Implementation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#training" title="Training" class="md-nav__link">
    Training
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" title="Models" class="md-nav__link">
    Models
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imagination-augmented-agents" title="Imagination Augmented Agents" class="md-nav__link">
    Imagination Augmented Agents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dnc-framework" title="DNC framework" class="md-nav__link">
    DNC framework
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#training" title="Training" class="md-nav__link">
    Training
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" title="Models" class="md-nav__link">
    Models
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imagination-augmented-agents" title="Imagination Augmented Agents" class="md-nav__link">
    Imagination Augmented Agents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dnc-framework" title="DNC framework" class="md-nav__link">
    DNC framework
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="implementation">Implementation</h1>
<p>This section discuss some of the machine learning models and methods envisaged to
predict the proofs content from the definition.</p>
<h2 id="training">Training</h2>
<p>I guess than since the quantity of datas is small, the best chance for a model
to predict proofs content is to use reinforcment learning and check the model
correctness using Coq directly.
This process enable the algorithm to solve training problems in any possible way, and not only
by outputing the exact same proof as the original one.</p>
<p>However, since the number of trial is expected to be very high, especially
at the beginning, we could use the original proof to guide learning :
The closest the model is from the original proof, the higher is the reward.
By lowering the original proof influence over time, we could achieve both
a faster bootstrap of the model and reinforcment learning freedom.</p>
<p>Moreover, train/test dataset split are more complex than a <code>sklearn.train_test_split</code>,
because the dataset is highly structured, we can't just take one random part as the test case.
We first need to retreive the different proofs in the dataset
(a python function has been developed in <code>srcs/utils/proofs.py</code> to iterate over them),
then we need to structurate the proofs to avoid using a testing proof at training step because it was
implicitly included in a dependency. We therefore need to ensure that proofs in the testing/validation dataset
cannot be included anywhere in the training set.</p>
<p>Lastly, the model will need ordering on the input datas:</p>
<ol>
<li>Learn the axioms</li>
<li>Learn the context (e.g: proofs included in dependencies)</li>
<li>The definiton to be solved</li>
</ol>
<h2 id="models">Models</h2>
<p>The common point of those models is that they all are recurrent, this
is because the nature of the input and output are inherently sequential.</p>
<h3 id="imagination-augmented-agents">Imagination Augmented Agents</h3>
<p>This architecture, published by Deepmind, will in my opinion be the best fit for this problem.
The capacity of the agent to plan for the long term reward can, according to the result published in their
paper, divide the number of simulation steps required to solve a sokoban level by 25 (in comparison with optimized Monte Carlo Tree Search)</p>
<ul>
<li>Implementation - None at the moment.</li>
<li><a href="https://arxiv.org/abs/1707.06203">Paper</a></li>
<li><a href="https://deepmind.com/blog/agents-imagine-and-plan/">Deepmind blog post</a></li>
</ul>
<h3 id="dnc-framework">DNC framework</h3>
<ul>
<li><a href="https://github.com/deepmind/dnc">Implementation</a></li>
<li><a href="https://www.nature.com/articles/nature20101.epdf?author_access_token=ImTXBI8aWbYxYQ51Plys8NRgN0jAjWel9jnR3ZoTv0MggmpDmwljGswxVdeocYSurJ3hxupzWuRNeGvvXnoO8o4jTJcnAyhGuZzXJ1GEaD-Z7E6X_a9R-xqJ9TfJWBqz">Paper</a></li>
<li><a href="https://deepmind.com/blog/differentiable-neural-computers/">Deepmind blog post</a></li>
</ul>
<h1 id="limits">Limits</h1>
<h2 id="technical-issues">Technical issues</h2>
<ul>
<li>
<p>As i wasn't able to find a Coq parser in python, the parsing features had to
  be rewriten from scratch in python, this has two drawbacks:</p>
<ol>
<li>It is weaker than a parser, some issues with the lexing and the context
    require a lot of code to solve, and is more sensitive to bugs.</li>
<li>As it is all written in Python, it take more time to process the data.
    This drawback is much less impacting than the first one, as the amount
     of avaliable Coq files is relatively ysmall and need to be processed
     only once.</li>
</ol>
</li>
<li>
<p>The model could make use of categorical data instead of an unstructured character
 stream. We need to find a way to turn text data into categorical representations.
 We could use one-hot encoding to do so, by encoding differently free text (such
   as naming) and language operators to avoid confusion.</p>
</li>
<li>
<p>A reinforcment learning model would have to have it's output tested against coq to
ensure the proof correctness, however this is an expensive process, it can easily
become the learning process bottleneck.</p>
</li>
</ul>
<h2 id="learning-issues">Learning issues</h2>
<ul>
<li>
<p>The token stream and raw text shouldn't be handled by different models.
This could be solved by training them with different kind of input datas,
as deepmind did on their DNC paper. Or we could encode the token type into the
model input along with the raw stream.</p>
</li>
<li>
<p>The required number of simulations for reinforcment learning is high and the
simulations are costly.</p>
</li>
</ul>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../data/" title="Data" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Data
              </span>
            </div>
          </a>
        
        
          <a href="../roadmap/" title="Roadmap" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Roadmap
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-6940329b9f.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>